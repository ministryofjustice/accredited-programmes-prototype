{% extends "layouts/main.html" %}

{% block pageTitle %}
Building Choices: moderate intensity - {{ serviceName }} - GOV.UK Prototype Kit
{% endblock %}

{% block header %}
{% include "/includes/community/v3/head-no-nav.html" %}

{{ mojPrimaryNavigation({
		label: "Primary navigation",
		items: [
			{
			text: "Home",
			href: "../home"
			},
			{
			text: "Case list",
			href: "../referrals/open-referrals"
			},
			{
			text: "Groups",
			href: "group-list",
			active: true
			}
		]
	}) }}

{% endblock %}

{% block beforeContent %}
<div class="govuk-width-container">
	
	{% from "govuk/components/breadcrumbs/macro.njk" import govukBreadcrumbs %}

		{{ govukBreadcrumbs({
		items: [
			{
			text: "Groups",
			href: "group-list"
			},
			{
			text: "BCCDD1",
			href: "group-details-overview-ur"
			},
			{
			text: "Allocations",
			href: "group-details-allocated-ur"
			}
		]
		}) }}

</div>
{% endblock %}

{% block content %}
<div class="govuk-grid-row clear">
	<div class="govuk-grid-column-full">
		<div class="moj-page-header-actions clear">
			<div class="moj-page-header-actions__title">
				<!--<span class="govuk-caption-xl">North East</span>-->
				<h1 class="govuk-heading-xl">BCCDD1</h1>
			</div>
			<!--
			<div class="moj-page-header-actions__actions">
				<div class="moj-button-group moj-button-group--inline govuk-!-margin-top-6">
					<a href="group-list" class="govuk-button moj-button-menu__item govuk-button--secondary">Back to group list</a>
				</div>
			</div>
			-->
		</div>

<div class="govuk-grid-row">
	<div class="govuk-grid-column-full">

		<nav class="moj-sub-navigation" aria-label="Sub navigation">
			<ul class="moj-sub-navigation__list">
				<li class="moj-sub-navigation__item">
					<a class="moj-sub-navigation__link" href="group-details-overview-ur">Group overview</a>
				</li>
				<li class="moj-sub-navigation__item">
					<a class="moj-sub-navigation__link" aria-current="page" href="group-details-allocated-ur">Allocations</a>
				</li>
				<li class="moj-sub-navigation__item">
					<a class="moj-sub-navigation__link" href="group-schedule-overview">Schedule overview</a>
				</li>
			</ul>
		</nav>
	</div>
</div>

<div class="govuk-grid-row clear">
	<div class="govuk-grid-column-full">
		<h2 class="govuk-heading-l govuk-!-margin-top-4">Allocations and waitlist</h2>
	</div>
</div>

<div class="govuk-grid-row">
	<div class="govuk-grid-column-one-quarter">
		<div class="moj-filter">
			<div class="moj-filter__header">
				<div class="moj-filter__header-title">
					<h2 class="govuk-heading-m govuk-!-padding-top-0">Filters</h2>
				</div>
			</div>
		</div>
		<div class="moj-filter__content">
			<div class="moj-filter__options">
				<div class="govuk-button-group">
					<button type="submit" class="govuk-button" data-module="govuk-button">Apply filters</button>
					<a class="govuk-link govuk-link--no-visited-state" href="#">Clear filters</a>
				</div>
				<div class="govuk-form-group">
					<label class="govuk-label govuk-label--s" for="search-name-crn">Name or CRN</label>
					<input class="govuk-input" id="search-name-crn" name="search-name-crn" type="text">
				</div>				
			</div>
		</div>
	</div>

	<div class="govuk-grid-column-three-quarters">

		{% if showBanner %}
		<div role="region" class="moj-alert moj-alert--success" aria-label="success: Person removed successfully" data-module="moj-alert" data-dismissible="true">
			<div>
			  	<svg class="moj-alert__icon" role="presentation" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" height="30" width="30">
					<path d="M11.2869 24.6726L2.00415 15.3899L4.62189 12.7722L11.2869 19.4186L25.3781 5.32739L27.9958 7.96369L11.2869 24.6726Z" fill="currentColor" />
			  	</svg>
			</div>
				{% if data['choose-referral-status'] == "deprioritised" %}
					<div class="moj-alert__content">Alex River was removed from this group. Their referral status is now Deprioritised.</div>
				{% elseif data['choose-referral-status'] == "recall" %}
					<div class="moj-alert__content">Alex River was removed from this group. Their referral status is now Recall.</div>
				{% elseif data['choose-referral-status'] == "return-to-court" %}
					<div class="moj-alert__content">Alex River was removed from this group. Their referral status is now Return to Court.</div>
				{% else %}
					<div class="moj-alert__content">Alex River was added to this group. Their referral status is now Scheduled.</div>
				{% endif %}
			<div class="moj-alert__action">
			  <button class="moj-alert__dismiss" hidden>Dismiss</button>
			</div>
		</div>
		{% endif %}

		<nav class="moj-sub-navigation govuk-!-margin-bottom-4" aria-label="Sub navigation">
			<ul class="moj-sub-navigation__list">
				<li class="moj-sub-navigation__item">
					<a class="moj-sub-navigation__link" aria-current="page" href="group-details-allocated-ur">Allocated (0)</a>
				</li>
				<li class="moj-sub-navigation__item">
					<a class="moj-sub-navigation__link" href="group-details-waitlist-ur">Waitlist (52)</a>
				</li>
			</ul>
		</nav>
		<p class="govuk-body-s govuk-!-text-align-right govuk-!-margin-bottom-3">
			{% if showAllocated %}
				Showing <strong>1</strong> to <strong>1</strong> of <strong>1</strong> result
			{% else %}
				Showing <strong>0</strong> results
			{% endif %}
		</p>

<!--- Form action simply redirects users to the remove from a group page -->
{% if showAllocated %}
<form action="remove-from-group" method="post">
	<table class="govuk-table" style="max-width:70%;" data-module="moj-sortable-table">
		<thead class="govuk-table__head">
			<tr class="govuk-table__row">
				<th class="govuk-table__header" style="width: 5%"></th>
				<th scope="col" class="govuk-table__header" aria-sort="none">Name and CRN</th>
				<th scope="col" class="govuk-table__header" aria-sort="none">Sentence end date</th>
				<th scope="col" class="govuk-table__header" aria-sort="none">Referral status</th>
			</tr>
		</thead>
	<tbody>
		<tr class="govuk-table__row">
			<td class="govuk-table__cell">
				<div class="govuk-radios govuk-radios--small">
					<div class="govuk-radios__item">
						<input type="radio" class="govuk-radios__input" name="group-allocated" id="allocated-river-alex" value="river-alex">
						<label class="govuk-label govuk-radios__label" for="group-river-alex">
						<span class="govuk-visually-hidden">River, Alex</span>
					</div>
				</div>
			</td>
			<td class="govuk-table__cell">
				<a href="../profiles/referral-details/availability" class="govuk-link govuk-link--no-visited-state">River, Alex</a><br/>X123456</td>
			<td class="govuk-table__cell">20 May 2026<br/>Licence end date</td>
			<td class="govuk-table__cell"><strong class="govuk-tag govuk-tag--blue">Scheduled</strong></td>
			<!-- Version with multiple referral statuses - post-MVP
			<td class="govuk-table__cell"><strong class="govuk-tag govuk-tag--{{referral.referralColour | default('purple')}}">{{referral.referralStatus}}</strong></td>-->
		</tr>
	</tbody>
</table>
	<button type="submit" class="govuk-button" data-module="govuk-button">Remove from group</button>
</form>

<nav class="govuk-pagination" role="navigation" aria-label="results">
	<ul class="govuk-pagination__list">
		<li class="govuk-pagination__item govuk-pagination__item--current">
			<a class="govuk-link govuk-pagination__link" href="#" aria-label="Page 1" aria-current="page">1</a>
		</li>
	</ul>
</nav>

	{% else %}
	<p class="govuk-body-l">There are currently no people allocated to this group.</p>
	{% endif %}

    </div>
	</div>
</div>
{% endblock %}
